(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{9932:function(e,t,r){Promise.resolve().then(r.bind(r,7128))},7128:function(e,t,r){"use strict";r.r(t);var s=r(9533);r(1229);var i=r(7788),a=r(1250),n=r(6353),l=r(8889),o=r(4079),c=r(5242),d=r(8893),u=r(3176),x=r(4579),h=r(8197);let m=e=>{var t;let{service:r}=e,i=r.distance_miles?r.distance_miles.toFixed(1):"N/A";return(0,s.jsxs)(n.default,{href:"/services/".concat(r.id),className:"block border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] bg-white p-4 hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-none transition-all",children:[(0,s.jsx)("h3",{className:"font-satoshi text-lg font-bold mb-1",children:r.title||"Untitled Service"}),r.user&&(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[r.user.image&&(0,s.jsx)(h.default,{src:r.user.image,alt:r.user.name||"User",width:16,height:16,className:"rounded-full mr-1.5 border border-gray-300"}),(0,s.jsx)("span",{children:r.user.name||"Anonymous"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-800 mb-2 line-clamp-2",children:r.description||"No description available."}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs font-medium text-gray-500 mt-3",children:[(0,s.jsxs)("span",{children:["Category: ",(null===(t=r.category)||void 0===t?void 0:t.name)||"Uncategorized"]}),(0,s.jsxs)("span",{children:["\uD83D\uDCCD ~",i," mi away"]})]})]})};t.default=()=>{var e;let t=(0,a.useRouter)(),{status:r}=(0,i.useSession)({required:!0,onUnauthenticated(){t.push("/login")}}),{data:h,isLoading:f,error:p}=l.S.service.getNearbyServices.useQuery(void 0,{enabled:"authenticated"===r,staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>{var r;return(null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.code)!=="PRECONDITION_FAILED"&&e<3}});return"loading"===r||f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:(0,s.jsx)(o.Z,{className:"animate-spin h-12 w-12 text-blue-600",strokeWidth:2})}):(0,s.jsx)("div",{className:"min-h-screen bg-blue-50 p-4 py-10 font-inter",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center mb-8",children:[(0,s.jsxs)(n.default,{href:"/dashboard",className:"inline-flex items-center p-2 bg-white border-2 border-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-none transition-all focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-black mr-4",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5",strokeWidth:2}),(0,s.jsx)("span",{className:"sr-only",children:"Back to Dashboard"})]}),(0,s.jsxs)("h1",{className:"font-satoshi tracking-tight text-3xl font-bold text-black flex items-center",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 mr-2 text-green-600",strokeWidth:2})," Nearby Services"]})]}),p&&(0,s.jsxs)("div",{className:"mb-6 bg-red-100 border-2 border-red-500 text-red-700 px-4 py-3 shadow-[4px_4px_0px_0px_#ef4444]",children:[(0,s.jsxs)("p",{className:"font-medium flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2",strokeWidth:2}),"Error: ",p.message]}),(null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.code)==="PRECONDITION_FAILED"&&(0,s.jsx)(n.default,{href:"/profile/edit",className:"mt-2 inline-block text-sm text-blue-600 underline hover:text-blue-800 font-medium",children:"Click here to update your profile location and radius."})]}),!p&&h&&h.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,s.jsx)(m,{service:e},e.id))}),!p&&h&&0===h.length&&(0,s.jsxs)("div",{className:"text-center bg-white p-8 border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]",children:[(0,s.jsx)(x.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4",strokeWidth:1.5}),(0,s.jsx)("h2",{className:"font-satoshi text-xl font-semibold text-gray-700 mb-2",children:"No Nearby Services Found"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Try expanding your service radius in your profile or check back later."}),(0,s.jsx)(n.default,{href:"/profile/edit",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 font-semibold border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-none transition-all text-sm focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-black",children:"Update Profile Radius"})]})]})})}},8889:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});let s=(0,r(4366).ec)()},9882:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(1229),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:x,...h}=r;return(0,s.createElement)("svg",{ref:n,...i,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(a(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(x)?x:[x]])});return r.displayName="".concat(e),r}},3176:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9882).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5242:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9882).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4079:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9882).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8893:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9882).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4579:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9882).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1250:function(e,t,r){"use strict";var s=r(7797);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[366,788,353,197,170,842,744],function(){return e(e.s=9932)}),_N_E=e.O()}]);