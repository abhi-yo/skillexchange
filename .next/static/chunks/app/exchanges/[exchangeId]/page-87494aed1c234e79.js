(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{53744:function(e,t,r){Promise.resolve().then(r.bind(r,87930))},87930:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return e_}});var a=r(59533),s=r(31229),n=r(61250),o=r(87788),l=r(18889),d=r(34373),i=r(89423),c=r(24079),u=r(33176),x=r(71621),m=r(81773),h=r(22358),p=r(28803),b=r(55242),g=r(22829),f=r(96353),v=r(68197),j=r(64985),y=r(58738),N=r(11467),w=r(52846),_=r(35220),E=r(68545),D=r(43350),k=r(56186),C=r(89878),S=r(97200),z=r(78880),R=r(73842),Z=r(18938),A=r(98029),I=r(27413),M=r(85092),O=r(14492),P="Dialog",[F,T]=(0,E.b)(P),[q,L]=F(P),W=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:l,modal:d=!0}=e,i=s.useRef(null),c=s.useRef(null),[u,x]=(0,k.T)({prop:n,defaultProp:null!=o&&o,onChange:l,caller:P});return(0,a.jsx)(q,{scope:t,triggerRef:i,contentRef:c,contentId:(0,D.M)(),titleId:(0,D.M)(),descriptionId:(0,D.M)(),open:u,onOpenChange:x,onOpenToggle:s.useCallback(()=>x(e=>!e),[x]),modal:d,children:r})};W.displayName=P;var U="DialogTrigger",B=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=L(U,r),o=(0,_.e)(t,n.triggerRef);return(0,a.jsx)(Z.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":ec(n.open),...s,ref:o,onClick:(0,w.M)(e.onClick,n.onOpenToggle)})});B.displayName=U;var V="DialogPortal",[H,Y]=F(V,{forceMount:void 0}),X=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:o}=e,l=L(V,t);return(0,a.jsx)(H,{scope:t,forceMount:r,children:s.Children.map(n,e=>(0,a.jsx)(R.z,{present:r||l.open,children:(0,a.jsx)(z.h,{asChild:!0,container:o,children:e})}))})};X.displayName=V;var Q="DialogOverlay",K=s.forwardRef((e,t)=>{let r=Y(Q,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,o=L(Q,e.__scopeDialog);return o.modal?(0,a.jsx)(R.z,{present:s||o.open,children:(0,a.jsx)(J,{...n,ref:t})}):null});K.displayName=Q;var G=(0,O.Z8)("DialogOverlay.RemoveScroll"),J=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=L(Q,r);return(0,a.jsx)(I.Z,{as:G,allowPinchZoom:!0,shards:[n.contentRef],children:(0,a.jsx)(Z.WV.div,{"data-state":ec(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),$="DialogContent",ee=s.forwardRef((e,t)=>{let r=Y($,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,o=L($,e.__scopeDialog);return(0,a.jsx)(R.z,{present:s||o.open,children:o.modal?(0,a.jsx)(et,{...n,ref:t}):(0,a.jsx)(er,{...n,ref:t})})});ee.displayName=$;var et=s.forwardRef((e,t)=>{let r=L($,e.__scopeDialog),n=s.useRef(null),o=(0,_.e)(t,r.contentRef,n);return s.useEffect(()=>{let e=n.current;if(e)return(0,M.Ry)(e)},[]),(0,a.jsx)(ea,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,w.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,w.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,w.M)(e.onFocusOutside,e=>e.preventDefault())})}),er=s.forwardRef((e,t)=>{let r=L($,e.__scopeDialog),n=s.useRef(!1),o=s.useRef(!1);return(0,a.jsx)(ea,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,s;null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),t.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:t=>{var a,s;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(o.current=!0));let l=t.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),ea=s.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:l,...d}=e,i=L($,r),c=s.useRef(null),u=(0,_.e)(t,c);return(0,A.EW)(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.M,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:l,children:(0,a.jsx)(C.XB,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ec(i.open),...d,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh,{titleId:i.titleId}),(0,a.jsx)(ep,{contentRef:c,descriptionId:i.descriptionId})]})]})}),es="DialogTitle",en=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=L(es,r);return(0,a.jsx)(Z.WV.h2,{id:n.titleId,...s,ref:t})});en.displayName=es;var eo="DialogDescription",el=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=L(eo,r);return(0,a.jsx)(Z.WV.p,{id:n.descriptionId,...s,ref:t})});el.displayName=eo;var ed="DialogClose",ei=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=L(ed,r);return(0,a.jsx)(Z.WV.button,{type:"button",...s,ref:t,onClick:(0,w.M)(e.onClick,()=>n.onOpenChange(!1))})});function ec(e){return e?"open":"closed"}ei.displayName=ed;var eu="DialogTitleWarning",[ex,em]=(0,E.k)(eu,{contentName:$,titleName:es,docsSlug:"dialog"}),eh=e=>{let{titleId:t}=e,r=em(eu),a="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return s.useEffect(()=>{t&&!document.getElementById(t)&&console.error(a)},[a,t]),null},ep=e=>{let{contentRef:t,descriptionId:r}=e,a=em("DialogDescriptionWarning"),n="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(a.contentName,"}.");return s.useEffect(()=>{var e;let a=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");r&&a&&!document.getElementById(r)&&console.warn(n)},[n,t,r]),null},eb=r(52299);let eg=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(K,{ref:t,className:(0,eb.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});eg.displayName=K.displayName;let ef=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(X,{children:[(0,a.jsx)(eg,{}),(0,a.jsxs)(ee,{ref:t,className:(0,eb.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n,children:[s,(0,a.jsxs)(ei,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ef.displayName=ee.displayName;let ev=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,eb.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};ev.displayName="DialogHeader";let ej=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,eb.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};ej.displayName="DialogFooter";let ey=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(en,{ref:t,className:(0,eb.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});ey.displayName=en.displayName;let eN=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(el,{ref:t,className:(0,eb.cn)("text-sm text-muted-foreground",r),...s})});eN.displayName=el.displayName;let ew=e=>{if(!e)return"Not set";try{return(0,j.WU)(new Date(e),"PPP p")}catch(e){return"Invalid Date"}};var e_=()=>{var e,t,r,j,w,_,E,D,k,C,S,z,R,Z;let A=(0,n.useParams)(),I=(0,n.useRouter)(),{data:M,status:O}=(0,o.useSession)(),P=A.exchangeId,[F,T]=(0,s.useState)(!1),[q,L]=(0,s.useState)(),[U,V]=(0,s.useState)(!1),[H,Y]=(0,s.useState)(!1),{data:X,isLoading:Q,error:K,refetch:G}=l.S.exchange.getExchangeById.useQuery({id:P},{enabled:!!P&&"authenticated"===O,staleTime:3e5}),J=l.S.exchange.respondToRequest.useMutation({onMutate:()=>{T(!0)},onSuccess:e=>{y.Am.success("Exchange ".concat("ACCEPTED"===e.status?"accepted":"declined",".")),"ACCEPTED"===e.status&&V(!0),G()},onError:e=>{y.Am.error("Failed to respond: ".concat(e.message)),console.error("Respond error:",e)},onSettled:()=>{T(!1)}}),$=l.S.exchange.scheduleExchange.useMutation({onMutate:()=>{T(!0)},onSuccess:()=>{y.Am.success("Exchange scheduled successfully!"),V(!1),L(void 0),G()},onError:e=>{y.Am.error("Failed to schedule: ".concat(e.message)),console.error("Schedule error:",e)},onSettled:()=>{T(!1)}}),ee=l.S.exchange.cancelExchange.useMutation({onMutate:()=>{Y(!0)},onSuccess:()=>{y.Am.success("Exchange cancelled successfully."),G()},onError:e=>{y.Am.error("Failed to cancel: ".concat(e.message)),console.error("Cancel error:",e)},onSettled:()=>{Y(!1)}}),et=l.S.exchange.completeExchange.useMutation({onMutate:()=>{T(!0)},onSuccess:()=>{y.Am.success("Exchange marked as complete!"),G()},onError:e=>{y.Am.error("Failed to complete: ".concat(e.message)),console.error("Complete error:",e)},onSettled:()=>{T(!1)}}),er=e=>{P&&J.mutate({exchangeId:P,accept:e})};s.useEffect(()=>{"unauthenticated"===O&&I.push("/login")},[O,I]),s.useEffect(()=>{(null==X?void 0:X.scheduledDate)&&L(new Date(X.scheduledDate))},[null==X?void 0:X.scheduledDate]);let ea=X&&["REQUESTED","ACCEPTED","SCHEDULED"].includes(X.status);if("loading"===O||"authenticated"===O&&Q)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(c.Z,{className:"animate-spin h-12 w-12 text-blue-600"})});if(K)return(0,a.jsx)("div",{className:"container mx-auto p-6 text-center",children:(0,a.jsxs)(d.Zb,{className:"max-w-md mx-auto border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] bg-white",children:[(0,a.jsx)(d.Ol,{className:"bg-red-100 border-b-2 border-black",children:(0,a.jsxs)(d.ll,{className:"flex items-center justify-center text-red-700",children:[(0,a.jsx)(u.Z,{className:"mr-2",size:20})," Error Loading Exchange"]})}),(0,a.jsxs)(d.aY,{className:"pt-6",children:[(0,a.jsx)("p",{className:"text-sm text-red-600 mb-4",children:(null===(Z=K.data)||void 0===Z?void 0:Z.code)==="FORBIDDEN"?"You do not have permission to view this exchange.":"Could not load exchange details: ".concat(K.message)}),(0,a.jsx)(f.default,{href:"/exchanges",children:(0,a.jsx)(i.z,{children:"Back to Exchanges"})})]})]})});if(!X)return(0,a.jsxs)("div",{className:"container mx-auto p-6 text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Exchange not found or still loading..."}),(0,a.jsx)(f.default,{href:"/exchanges",children:(0,a.jsx)(i.z,{className:"mt-4",children:"Back to Exchanges"})})]});let es=null==M?void 0:null===(e=M.user)||void 0===e?void 0:e.id,en=X.providerId===es,eo=X.requesterId===es;en?X.requester:X.provider;let{text:el,icon:ed,color:ec}=(e=>{switch(e){case"REQUESTED":return{text:"Requested",icon:x.Z,color:"bg-yellow-100 text-yellow-800 border-yellow-300"};case"ACCEPTED":return{text:"Accepted",icon:m.Z,color:"bg-blue-100 text-blue-800 border-blue-300"};case"SCHEDULED":return{text:"Scheduled",icon:h.Z,color:"bg-indigo-100 text-indigo-800 border-indigo-300"};case"COMPLETED":return{text:"Completed",icon:m.Z,color:"bg-green-100 text-green-800 border-green-300"};case"DECLINED":return{text:"Declined",icon:p.Z,color:"bg-red-100 text-red-800 border-red-300"};case"CANCELLED":return{text:"Cancelled",icon:p.Z,color:"bg-gray-100 text-gray-800 border-gray-300"};default:return{text:e,icon:u.Z,color:"bg-gray-100 text-gray-800 border-gray-300"}}})(X.status);return(0,a.jsx)("div",{className:"min-h-screen bg-blue-50 p-4 md:p-8 font-inter",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(f.default,{href:"/exchanges",className:"inline-flex items-center text-sm font-medium text-blue-600 hover:underline",children:[(0,a.jsx)(b.Z,{size:16,className:"mr-1"}),"Back to All Exchanges"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b-2 border-black bg-gray-100 flex justify-between items-center",children:[(0,a.jsxs)("h1",{className:"font-satoshi tracking-satoshi-tight text-lg font-bold text-black flex items-center",children:[(0,a.jsx)(g.Z,{className:"mr-2 text-gray-700",size:20}),"Exchange Details"]}),(0,a.jsxs)("div",{className:"flex items-center px-2 py-1 border ".concat(ec," text-xs font-bold"),children:[(0,a.jsx)(ed,{size:14,className:"mr-1"}),el]})]}),(0,a.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Request ID: ",X.id]}),(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1 p-4 border-2 border-black bg-gray-50 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Requester"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(v.default,{src:(null===(t=X.requester)||void 0===t?void 0:t.image)||"/default-avatar.png",alt:(null===(r=X.requester)||void 0===r?void 0:r.name)||"Requester",width:40,height:40,className:"rounded-full border-2 border-black bg-white"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-bold text-sm",children:(null===(j=X.requester)||void 0===j?void 0:j.name)||"Unknown User"})})]})]}),(0,a.jsx)(g.Z,{size:24,className:"text-gray-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 p-4 border-2 border-black bg-gray-50 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Provider"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(v.default,{src:(null===(w=X.provider)||void 0===w?void 0:w.image)||"/default-avatar.png",alt:(null===(_=X.provider)||void 0===_?void 0:_.name)||"Provider",width:40,height:40,className:"rounded-full border-2 border-black bg-white"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-bold text-sm",children:(null===(E=X.provider)||void 0===E?void 0:E.name)||"Unknown User"})})]})]})]}),(0,a.jsxs)("div",{className:"p-4 border-2 border-black bg-yellow-50 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,a.jsx)("h3",{className:"font-bold text-sm mb-2",children:"Service Details"}),(0,a.jsx)("p",{className:"font-semibold",children:(null===(D=X.providerService)||void 0===D?void 0:D.title)||"Service Title Not Available"}),(0,a.jsx)(f.default,{href:"/services/".concat(X.providerServiceId),className:"text-xs text-blue-600 hover:underline mt-1 inline-block",children:"(View Service)"}),X.requesterService&&(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Offered in return: ",X.requesterService.title]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Date Requested"}),(0,a.jsx)("p",{children:ew(X.createdAt)})]}),(0,a.jsxs)("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Scheduled Date"}),(0,a.jsx)("p",{children:ew(X.scheduledDate)})]}),(0,a.jsxs)("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Date Completed"}),(0,a.jsx)("p",{children:ew(X.completedDate)})]}),(0,a.jsxs)("div",{className:"p-3 border border-gray-200 bg-gray-50",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-600",children:"Hours"}),(0,a.jsx)("p",{children:null!==X.hours?"".concat(X.hours," hour(s)"):"Not set"})]})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b-2 border-black bg-blue-100",children:(0,a.jsx)("h2",{className:"font-satoshi tracking-satoshi-tight text-lg font-bold text-black",children:"Actions"})}),(0,a.jsxs)("div",{className:"px-6 py-6 space-y-4",children:["REQUESTED"===X.status&&(0,a.jsxs)(a.Fragment,{children:[en&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm font-medium mb-3",children:["Respond to request from ",null===(k=X.requester)||void 0===k?void 0:k.name,":"]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(i.z,{onClick:()=>er(!0),disabled:F,className:"flex-1 bg-green-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:[F&&(null===(C=J.variables)||void 0===C?void 0:C.accept)?(0,a.jsx)(c.Z,{className:"animate-spin mr-2",size:16}):(0,a.jsx)(m.Z,{size:16,className:"mr-2"})," Accept"]}),(0,a.jsxs)(i.z,{onClick:()=>er(!1),disabled:F,className:"flex-1 bg-red-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:[!F||(null===(S=J.variables)||void 0===S?void 0:S.accept)?(0,a.jsx)(p.Z,{size:16,className:"mr-2"}):(0,a.jsx)(c.Z,{className:"animate-spin mr-2",size:16})," Decline"]})]})]}),eo&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["Waiting for ",null===(z=X.provider)||void 0===z?void 0:z.name," to respond."]})]}),"ACCEPTED"===X.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-3",children:"Schedule the exchange:"}),(0,a.jsxs)(W,{open:U,onOpenChange:V,children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsxs)(i.z,{disabled:F,className:"w-full bg-indigo-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:[(0,a.jsx)(h.Z,{size:16,className:"mr-2"})," Set Schedule"]})}),(0,a.jsxs)(ef,{className:"sm:max-w-[425px] bg-white border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]",children:[(0,a.jsxs)(ev,{className:"border-b-2 border-black pb-3",children:[(0,a.jsx)(ey,{className:"font-satoshi text-lg font-bold",children:"Schedule Exchange"}),(0,a.jsx)(eN,{children:"Select a date and time for this service exchange."})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(N.f,{mode:"single",selected:q,onSelect:L,className:"rounded-md border border-black mx-auto",disabled:e=>e<new Date(new Date().setDate(new Date().getDate()-1))})}),(0,a.jsxs)(ej,{className:"border-t-2 border-black pt-4",children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsx)(i.z,{type:"button",className:"bg-gray-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:"Cancel"})}),(0,a.jsxs)(i.z,{type:"button",onClick:()=>{if(!P||!q){y.Am.error("Please select a date first.");return}$.mutate({exchangeId:P,scheduledDate:q})},disabled:!q||F,className:"bg-blue-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:[F?(0,a.jsx)(c.Z,{className:"animate-spin mr-2",size:16}):null," Confirm Schedule"]})]})]})]})]}),"SCHEDULED"===X.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm font-medium mb-2",children:["Scheduled for: ",ew(X.scheduledDate)]}),en&&(0,a.jsxs)(i.z,{onClick:()=>{let e;if(!P)return;let t=prompt("Enter hours completed (optional, min 0.5):","1");if(t){let r=parseFloat(t);if(!isNaN(r)&&r>=.5)e=r;else if(""!==t.trim()){y.Am.error("Invalid hours entered. Please enter a number >= 0.5 or leave blank.");return}}window.confirm("Are you sure you want to mark this exchange as complete?")&&et.mutate({exchangeId:P,hours:e})},disabled:F,className:"w-full bg-green-200 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:[F?(0,a.jsx)(c.Z,{className:"animate-spin mr-2",size:16}):(0,a.jsx)(m.Z,{size:16,className:"mr-2"})," Mark as Complete"]}),eo&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["Waiting for ",null===(R=X.provider)||void 0===R?void 0:R.name," to mark as complete after the service."]})]}),"COMPLETED"===X.status&&(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 border-2 border-dashed border-green-300",children:[(0,a.jsx)(m.Z,{size:24,className:"mx-auto text-green-600 mb-2"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"Exchange completed."})]}),"DECLINED"===X.status&&(0,a.jsxs)("div",{className:"text-center p-4 bg-red-50 border-2 border-dashed border-red-300",children:[(0,a.jsx)(p.Z,{size:24,className:"mx-auto text-red-600 mb-2"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"Exchange declined."})]}),"CANCELLED"===X.status&&(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 border-2 border-dashed border-gray-300",children:[(0,a.jsx)(p.Z,{size:24,className:"mx-auto text-gray-600 mb-2"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Exchange cancelled."})]}),(0,a.jsx)(i.z,{className:"w-full border-2 border-black bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",children:"Send Message"}),ea&&(0,a.jsxs)(i.z,{className:"w-full mt-4 border-2 border-black bg-red-200 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all",onClick:()=>{P&&X&&window.confirm("Are you sure you want to cancel this exchange? This cannot be undone.")&&ee.mutate({exchangeId:P})},disabled:H||F,children:[H?(0,a.jsx)(c.Z,{size:16,className:"animate-spin mr-2"}):(0,a.jsx)(p.Z,{size:16,className:"mr-2"}),"Cancel Exchange"]})]})]})})]})]})})}},89423:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(59533),s=r(14492),n=r(95084);r(31229);var o=r(52299);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-base text-sm font-base ring-offset-white transition-all gap-2 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-black focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"text-main-foreground bg-main border-2 border-border shadow-shadow hover:translate-x-boxShadowX hover:translate-y-boxShadowY hover:shadow-none",noShadow:"text-main-foreground bg-main border-2 border-border",neutral:"bg-secondary-background text-foreground border-2 border-border shadow-shadow hover:translate-x-boxShadowX hover:translate-y-boxShadowY hover:shadow-none",reverse:"text-main-foreground bg-main border-2 border-border hover:translate-x-reverseBoxShadowX hover:translate-y-reverseBoxShadowY hover:shadow-shadow"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:n,asChild:d=!1,...i}=e,c=d?s.g7:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,o.cn)(l({variant:r,size:n,className:t})),...i})}},11467:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var a=r(59533),s=r(13316),n=r(35046),o=r(15804);r(31229);var l=r(52299);function d(e){let{className:t,classNames:r,showOutsideDays:d=!0,...i}=e;return(0,a.jsx)(o._W,{showOutsideDays:d,className:(0,l.cn)("p-1 border-2 border-black bg-white shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] mb-0",t),classNames:{months:"flex flex-col sm:flex-row sm:space-x-4 sm:space-y-0",month:"space-y-1",caption:"flex justify-center pt-1 relative items-center text-black",caption_label:"text-base font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50","h-7 w-7 bg-transparent p-0 border border-black hover:bg-neutral-100 active:bg-neutral-200"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-10 font-normal text-sm",row:"flex w-full mt-1",cell:(0,l.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-blue-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md","range"===i.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50","h-10 w-10 p-0 font-normal aria-selected:opacity-100 hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-px active:shadow-none active:translate-y-0"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-blue-200 text-black hover:bg-blue-300 focus:bg-blue-300 rounded-md shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]",day_today:"bg-neutral-100 text-black rounded-md border border-black",day_outside:"day-outside text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-blue-100 aria-selected:text-black",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(s.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(n.Z,{className:"h-4 w-4"})}},...i})}d.displayName="Calendar"},34373:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return n},aY:function(){return i},ll:function(){return l}});var a=r(59533);r(31229);var s=r(52299);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("rounded-base flex flex-col shadow-shadow border-2 gap-6 py-6 border-border bg-background text-foreground font-base",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("font-heading leading-none",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-sm font-base",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},18889:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});let a=(0,r(24366).ec)()},52299:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(27494),s=r(97539);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},55242:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69882).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},28803:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69882).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[366,682,353,493,738,197,307,64,788,170,842,744],function(){return e(e.s=53744)}),_N_E=e.O()}]);