(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{81715:function(e,s,t){Promise.resolve().then(t.bind(t,51470))},51470:function(e,s,t){"use strict";t.r(s);var l=t(59533),a=t(31229),r=t(61250),o=t(96353),i=t(87788),n=t(18889),c=t(24079),d=t(33176),u=t(55242),x=t(37710);s.default=()=>{let e=(0,r.useRouter)(),{status:s}=(0,i.useSession)({required:!0,onUnauthenticated(){e.push("/login")}}),{data:t,isLoading:b,error:m,refetch:p}=n.S.user.getProfile.useQuery(void 0,{enabled:"authenticated"===s,refetchOnWindowFocus:!0}),h=n.S.user.updateProfile.useMutation({onSuccess:e=>{console.log("Profile updated successfully:",e),R("Profile updated successfully!"),E(null),p()},onError:e=>{E(e.message||"Failed to update profile."),R(null)}}),[f,g]=(0,a.useState)(""),[v,k]=(0,a.useState)(""),[_,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[C,P]=(0,a.useState)(""),[Z,E]=(0,a.useState)(null),[L,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(t){var e,s,l,a,r,o;g(t.name||""),k(t.image||""),y((null===(e=t.location)||void 0===e?void 0:e.address)||[null===(s=t.location)||void 0===s?void 0:s.city,null===(l=t.location)||void 0===l?void 0:l.state].filter(Boolean).join(", ")||""),N(null!==(o=null===(a=t.location)||void 0===a?void 0:a.radius)&&void 0!==o?o:""),S((null===(r=t.skills)||void 0===r?void 0:r.map(e=>e.name).join(", "))||"")}},[t]);let W=(0,a.useCallback)(e=>{var s,l,a,r,o,i;if(e.preventDefault(),E(null),R(null),!t)return;let n={};f!==(t.name||"")&&(n.name=f),v!==(t.image||"")&&(n.image=v||null),_!==((null===(s=t.location)||void 0===s?void 0:s.address)||[null===(l=t.location)||void 0===l?void 0:l.city,null===(a=t.location)||void 0===a?void 0:a.state].filter(Boolean).join(", ")||"")&&(n.locationString=_);let c=null!==(i=null===(r=t.location)||void 0===r?void 0:r.radius)&&void 0!==i?i:"",d=""===j?void 0:Number(j);if(d!==(""===c?void 0:Number(c))){let e=""===j||isNaN(d)?void 0:d;n.radius=e}w!==((null===(o=t.skills)||void 0===o?void 0:o.map(e=>e.name).join(", "))||"")&&(n.skills=w.split(",").map(e=>e.trim()).filter(e=>e.length>0)),Object.keys(n).length>0?(console.log("Updating profile with payload:",n),h.mutate(n)):R("No changes detected.")},[f,v,_,j,w,t,h]);return"loading"===s||b?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:(0,l.jsx)(c.Z,{className:"animate-spin h-12 w-12 text-blue-600",strokeWidth:2})}):m?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:(0,l.jsxs)("div",{className:"max-w-md w-full bg-white p-8 border-2 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] text-center",children:[(0,l.jsx)(d.Z,{className:"mx-auto h-10 w-10 text-red-500 mb-3",strokeWidth:2}),(0,l.jsx)("h2",{className:"font-satoshi text-xl font-bold text-red-700 mb-2",children:"Error Loading Profile"}),(0,l.jsx)("p",{className:"text-red-600 text-sm leading-normal",children:"Could not load profile data. Please try again later."}),(0,l.jsxs)(o.default,{href:"/dashboard",className:"inline-flex items-center mt-5 px-4 py-2 bg-red-100 text-red-700 font-semibold border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-none transition-all text-sm focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-black",children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4",strokeWidth:2}),"Back to Dashboard"]})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-blue-50 p-4 py-10 font-inter",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-8 border-2 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",children:[(0,l.jsxs)("div",{className:"flex items-center mb-8",children:[(0,l.jsxs)(o.default,{href:"/dashboard",className:"inline-flex items-center p-2 bg-white border-2 border-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-none transition-all focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-black mr-4",children:[(0,l.jsx)(u.Z,{className:"h-5 w-5",strokeWidth:2}),(0,l.jsx)("span",{className:"sr-only",children:"Back to Dashboard"})]}),(0,l.jsx)("h1",{className:"font-satoshi tracking-tight text-4xl font-bold text-black",children:"Edit Your Profile"})]}),Z&&(0,l.jsx)("div",{className:"mb-5 bg-red-100 border-2 border-red-500 text-red-700 px-4 py-3 shadow-[4px_4px_0px_0px_#ef4444]",children:(0,l.jsxs)("p",{className:"font-medium",children:["Error: ",(0,l.jsx)("span",{className:"font-normal",children:Z})]})}),L&&(0,l.jsx)("div",{className:"mb-5 bg-green-100 border-2 border-green-500 text-green-700 px-4 py-3 shadow-[4px_4px_0px_0px_#22c55e]",children:(0,l.jsxs)("p",{className:"flex items-center",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4 mr-2",strokeWidth:2})," ",L]})}),(0,l.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"name",className:"block text-base font-bold font-satoshi text-black mb-1",children:"Name"}),(0,l.jsx)("input",{id:"name",name:"name",type:"text",value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border-2 border-black focus:ring-2 focus:ring-blue-500 focus:outline-none focus:border-blue-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"image",className:"block text-base font-bold font-satoshi text-black mb-1",children:"Profile Image URL"}),(0,l.jsx)("input",{id:"image",name:"image",type:"url",value:v,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border-2 border-black focus:ring-2 focus:ring-blue-500 focus:outline-none focus:border-blue-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]",placeholder:"https://your-image-url.com/image.png"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",id:"location",children:[(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{htmlFor:"location",className:"block text-base font-bold font-satoshi text-black mb-1",children:"Location"}),(0,l.jsx)("input",{id:"location",name:"location",type:"text",value:_,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border-2 border-black focus:ring-2 focus:ring-blue-500 focus:outline-none focus:border-blue-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]",placeholder:"City, State or Address"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Your general location (e.g., "Austin, TX" or "123 Main St, Anytown").'})]}),(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsx)("label",{htmlFor:"serviceRadius",className:"block text-base font-bold font-satoshi text-black mb-1",children:"Service Radius (miles)"}),(0,l.jsx)("input",{id:"serviceRadius",name:"serviceRadius",type:"number",value:j,onChange:e=>N(e.target.value),min:"0",className:"w-full px-3 py-2 border-2 border-black focus:ring-2 focus:ring-blue-500 focus:outline-none focus:border-blue-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]",placeholder:"e.g., 15"})]})]}),(0,l.jsxs)("div",{id:"skills",children:[(0,l.jsx)("label",{htmlFor:"skills",className:"block text-base font-bold font-satoshi text-black mb-1",children:"Skills"}),(0,l.jsx)("textarea",{id:"skills",name:"skills",rows:3,value:w,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border-2 border-black focus:ring-2 focus:ring-blue-500 focus:outline-none focus:border-blue-500 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]",placeholder:"Enter skills, separated by commas (e.g., Web Development, Graphic Design, Tutoring)"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated list of your skills."})]}),(0,l.jsx)("div",{className:"pt-2",children:(0,l.jsx)("button",{type:"submit",disabled:h.isPending,className:"w-full flex justify-center py-2.5 px-4 border-2 border-black font-bold text-base text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all duration-150 ".concat(h.isPending?"bg-gray-400 hover:bg-gray-400 cursor-not-allowed hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-0 hover:translate-y-0":""),children:h.isPending?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{className:"animate-spin h-5 w-5 mr-2"})," Saving..."]}):"Save Profile"})})]})]})})}},18889:function(e,s,t){"use strict";t.d(s,{S:function(){return l}});let l=(0,t(24366).ec)()},69882:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var l=t(31229),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,s)=>{let t=(0,l.forwardRef)((t,o)=>{let{color:i="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:x,...b}=t;return(0,l.createElement)("svg",{ref:o,...a,width:n,height:n,stroke:i,strokeWidth:d?24*Number(c)/Number(n):c,className:["lucide","lucide-".concat(r(e)),u].join(" "),...b},[...s.map(e=>{let[s,t]=e;return(0,l.createElement)(s,t)}),...Array.isArray(x)?x:[x]])});return t.displayName="".concat(e),t}},33176:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(69882).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},55242:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(69882).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37710:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(69882).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},24079:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(69882).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},61250:function(e,s,t){"use strict";var l=t(27797);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[366,682,353,170,842,744],function(){return e(e.s=81715)}),_N_E=e.O()}]);